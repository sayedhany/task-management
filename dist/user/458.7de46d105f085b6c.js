"use strict";(self.webpackChunkuser=self.webpackChunkuser||[]).push([[458],{2592:(I,g,i)=>{i.r(g),i.d(g,{AuthModule:()=>y});var d=i(6814),b=i(6949),e=i(6223),h=i(9862),l=i(1896),t=i(5879),p=i(8672);const f=i(3790).N.baseUrl;let v=(()=>{class n{constructor(o){this.http=o}login(o){return this.http.post(`${f}auth/login`,o)}createNewUser(o){return this.http.post(`${f}auth/createAccount`,o)}static#t=this.\u0275fac=function(r){return new(r||n)(t.LFG(h.eN))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var C=i(833),Z=i(2425),x=i(2296),P=i(2032),a=i(9157);function M(n,Y){1&n&&(t.TgZ(0,"mat-hint"),t._uU(1,"Password not the same"),t.qZA())}const A=[{path:"login",component:(()=>{class n{constructor(o,r,s,c,u,m){this.fb=o,this.spinner=r,this.loginSrv=s,this.tokenSrv=c,this.toaster=u,this.router=m}ngOnInit(){this.createForm()}createForm(){this.loginForm=this.fb.group({email:["",[e.kI.required,e.kI.email]],password:["",[e.kI.required,e.kI.minLength(3),e.kI.maxLength(20)]],role:["user"]})}login(){this.spinner.show(),this.loginSrv.login(this.loginForm.value).subscribe(o=>{console.log(o),this.tokenSrv.setToken(o.token),this.toaster.success("Success","Login Success"),this.router.navigate(["tasks"]),this.spinner.hide()},o=>{this.toaster.error("Error","Login Faild!"),this.spinner.hide()})}static#t=this.\u0275fac=function(r){return new(r||n)(t.Y36(e.qu),t.Y36(p.t2),t.Y36(v),t.Y36(C.B),t.Y36(Z._W),t.Y36(l.F0))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-login"]],decls:23,vars:1,consts:[[1,"login","d-flex","justify-content-center","align-items-center","m-auto"],[1,"row"],[1,"col-md-12"],[1,"h-100","d-flex","align-items-center","justify-content-center","w-100"],[1,"box","w-75"],[3,"formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","email","placeholder","email"],["matInput","","formControlName","password","type","password","placeholder","password"],[1,"d-flex","justify-content-center"],["mat-raised-button","","color","warn",3,"click"]],template:function(r,s){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2"),t._uU(6,"Login "),t.qZA(),t.TgZ(7,"form",5)(8,"mat-form-field",6)(9,"mat-label"),t._uU(10,"Email"),t.qZA(),t._UZ(11,"input",7),t.TgZ(12,"mat-error"),t._uU(13,"required"),t.qZA()(),t.TgZ(14,"mat-form-field",6)(15,"mat-label"),t._uU(16,"Password"),t.qZA(),t._UZ(17,"input",8),t.TgZ(18,"mat-error"),t._uU(19,"required"),t.qZA()()(),t.TgZ(20,"div",9)(21,"button",10),t.NdJ("click",function(){return s.login()}),t._uU(22,"Login"),t.qZA()()()()()()()),2&r&&(t.xp6(7),t.Q6J("formGroup",s.loginForm))},dependencies:[x.lW,P.Nt,a.KE,a.hX,a.TO,e._Y,e.Fj,e.JJ,e.JL,e.sg,e.u],styles:["*[_ngcontent-%COMP%]{font-family:cursive}.login[_ngcontent-%COMP%]{position:absolute;inset:0}.login[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{background-color:#0009;position:absolute;inset:0;z-index:1}.login[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100vh}.login[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{z-index:5;width:30%;padding:50px 20px;border:1px solid #ddd;border-radius:15px;box-shadow:0 2px 5px #ca25104d}.login[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#26f3d1}.login[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:2px 100px}"]})}return n})()},{path:"register",component:(()=>{class n{constructor(o,r,s,c,u,m){this.fb=o,this.loginSrv=r,this.tokenSrv=s,this.spinner=c,this.toaster=u,this.router=m,this.passwordError=!1,this.checkPassword=w=>{let F=w.get("password")?.value,k=w.get("confirmedPassword")?.value;return F===k?null:{notSame:!0}}}ngOnInit(){this.registerForm=this.fb.group({username:["",[e.kI.required,e.kI.minLength(3)]],email:["",[e.kI.required,e.kI.email]],password:["",[e.kI.required]],confirmedPassword:["",[e.kI.required]],role:["user"]},{validators:this.checkPassword})}registerUser(){console.log(this.registerForm),this.registerForm.value.password===this.registerForm.value.confirmedPassword&&(this.spinner.show(),this.loginSrv.createNewUser(this.registerForm.value).subscribe(o=>{this.spinner.hide(),this.toaster.success("User Created"),this.tokenSrv.setToken(o.token),this.router.navigate(["/auth/login"])},o=>{this.spinner.hide(),this.toaster.error("User not Created")}))}static#t=this.\u0275fac=function(r){return new(r||n)(t.Y36(e.qu),t.Y36(v),t.Y36(C.B),t.Y36(p.t2),t.Y36(Z._W),t.Y36(l.F0))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-register"]],decls:39,vars:3,consts:[[1,"login","d-flex","justify-content-center","align-items-center","m-auto"],[1,"row"],[1,"col-md-12"],[1,"h-100","d-flex","align-items-center","justify-content-center","w-100"],[1,"box","w-75"],[3,"formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","username","placeholder","username"],["matInput","","formControlName","email","placeholder","email"],["matInput","","f","","formControlName","password","type","password","placeholder","password"],["matInput","","formControlName","confirmedPassword","type","password","placeholder","confirm password"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["mat-raised-button","","color","warn",3,"disabled","click"],["routerLink","/auth/login"]],template:function(r,s){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2"),t._uU(6,"Register "),t.qZA(),t.TgZ(7,"form",5)(8,"mat-form-field",6)(9,"mat-label"),t._uU(10,"Username"),t.qZA(),t._UZ(11,"input",7),t.TgZ(12,"mat-error"),t._uU(13,"required"),t.qZA()(),t.TgZ(14,"mat-form-field",6)(15,"mat-label"),t._uU(16,"Email"),t.qZA(),t._UZ(17,"input",8),t.TgZ(18,"mat-error"),t._uU(19,"required"),t.qZA()(),t.TgZ(20,"mat-form-field",6)(21,"mat-label"),t._uU(22,"Password"),t.qZA(),t._UZ(23,"input",9),t.TgZ(24,"mat-error"),t._uU(25,"required"),t.qZA()(),t.TgZ(26,"mat-form-field",6)(27,"mat-label"),t._uU(28,"Confirm Password"),t.qZA(),t._UZ(29,"input",10),t.TgZ(30,"mat-error"),t._uU(31,"required"),t.qZA(),t.YNc(32,M,2,0,"mat-hint",11),t.qZA()(),t.TgZ(33,"div",12)(34,"button",13),t.NdJ("click",function(){return s.registerUser()}),t._uU(35,"Create Account"),t.qZA()(),t.TgZ(36,"div",12)(37,"a",14),t._uU(38,"Have an Account ? "),t.qZA()()()()()()()),2&r&&(t.xp6(7),t.Q6J("formGroup",s.registerForm),t.xp6(25),t.Q6J("ngIf",s.registerForm.hasError("notSame")),t.xp6(2),t.Q6J("disabled",s.registerForm.invalid))},dependencies:[x.lW,P.Nt,a.KE,a.hX,a.bx,a.TO,l.rH,e._Y,e.Fj,e.JJ,e.JL,e.sg,e.u,d.O5],styles:["*[_ngcontent-%COMP%]{font-family:cursive}.login[_ngcontent-%COMP%]{position:absolute;inset:0}.login[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{background-color:#0009;position:absolute;inset:0;z-index:1}.login[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100vh}.login[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{z-index:5;width:30%;padding:50px 20px;border:1px solid #ddd;border-radius:15px;box-shadow:0 2px 5px #ca25104d}.login[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#26f3d1}.login[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:2px 100px}[_nghost-%COMP%]     .mat-hint{color:#f44336}"]})}return n})()}];let T=(()=>{class n{static#t=this.\u0275fac=function(r){return new(r||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[d.ez,l.Bz.forChild(A),l.Bz]})}return n})(),y=(()=>{class n{static#t=this.\u0275fac=function(r){return new(r||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[b.q,T,e.u5,e.UX,h.JF,d.ez]})}return n})()}}]);
"use strict";(self.webpackChunkuser=self.webpackChunkuser||[]).push([[40],{3040:(U,g,i)=>{i.r(g),i.d(g,{TasksModule:()=>O});var r=i(6814),t=i(5879),b=i(9347),x=i(3790),k=i(9862);const h=x.N.baseUrl;let T=(()=>{class e{constructor(s){this.http=s}userTasks(s){return this.http.get(`${h}tasks/user-tasks/${s}`)}completeTask(s){return this.http.put(`${h}tasks/complete`,s)}moveToInProgress(s){return this.http.put(`${h}tasks/moveToInProgress`,s)}taskDetails(s){return this.http.get(h+"tasks/task/"+s)}static#t=this.\u0275fac=function(o){return new(o||e)(t.LFG(k.eN))};static#s=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var d=i(6223),f=i(8672),_=i(2425),l=i(1896);let v=(()=>{class e{constructor(){}getToken(){return localStorage.getItem("token")}setToken(s){localStorage.setItem("token",s)}removeToken(){localStorage.removeItem("token")}static#t=this.\u0275fac=function(o){return new(o||e)};static#s=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var p=i(2296);function D(e,c){if(1&e){const s=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(s);const n=t.oxw().$implicit,a=t.oxw();return t.KtG(a.complete(n))}),t._uU(1,"Done"),t.qZA()}}function C(e,c){if(1&e){const s=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(s);const n=t.oxw().$implicit,a=t.oxw();return t.KtG(a.moveToInProgress(n))}),t._uU(1,"Move to In-Progress"),t.qZA()}}const I=function(e){return{"text-decoration-line-through":e}};function Z(e,c){if(1&e){const s=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"h2",7),t._uU(4),t.qZA(),t.TgZ(5,"h2",8),t._uU(6),t.qZA(),t.TgZ(7,"p",9),t._uU(8),t.qZA(),t.TgZ(9,"p",10),t._uU(10),t.qZA(),t.TgZ(11,"a",11),t.NdJ("click",function(){const a=t.CHM(s).$implicit,u=t.oxw();return t.KtG(u.taskDetails(a))}),t._uU(12,"Details"),t.qZA(),t.YNc(13,D,2,0,"button",12),t.YNc(14,C,2,0,"button",12),t.qZA()()()}if(2&e){const s=c.$implicit;t.xp6(3),t.Q6J("ngClass",t.VKq(7,I,"Done"===s.status)),t.xp6(1),t.Oqu(s.title),t.xp6(2),t.Oqu(s.status),t.xp6(2),t.hij("Dead-Line Date : ",s.deadLineDate,""),t.xp6(2),t.Oqu(s.description),t.xp6(3),t.Q6J("ngIf","Done"!==s.status&&"To Do"!==s.status),t.xp6(1),t.Q6J("ngIf","To Do"===s.status)}}function A(e,c){1&e&&(t.TgZ(0,"h2"),t._uU(1,"No Tasks Assigned to this user"),t.qZA())}function M(e,c){if(1&e){const s=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(s);const n=t.oxw();return t.KtG(n.completeTask(n.taskDetails._id))}),t._uU(1,"Complete"),t.qZA()}}function P(e,c){if(1&e){const s=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(s);const n=t.oxw();return t.KtG(n.completeTask(n.taskDetails._id))}),t._uU(1,"Move To In-Progress"),t.qZA()}}const Y=[{path:"tasks",component:(()=>{class e{constructor(s,o,n,a,u,m,F){this.dialog=s,this.tasksSrv=o,this.fb=n,this.spinner=a,this.toast=u,this.router=m,this.tokenSrv=F,this.displayedColumns=["position","title","user","deadLineDate","status","actions"],this.userID="",this.dataSource=[],this.users=[{name:"Moahmed",id:1},{name:"Ali",id:2},{name:"Ahmed",id:3},{name:"Zain",id:4}],this.status=[{name:"Complete",id:1},{name:"In-Prossing",id:2},{name:"To Do",id:3}]}ngOnInit(){this.tokenSrv.getToken()||this.router.navigate(["/auth/login"]),this.createform(),this.getUserData(),this.getAllTasks()}createform(){this.tasksFilter=this.fb.group({title:[""],userId:[""],fromDate:[""],toDate:[""]})}getUserData(){let s=JSON.stringify(localStorage.getItem("token"));this.userData=JSON.parse(window.atob(s.split(".")[1])),console.log(this.userData)}getAllTasks(){this.spinner.show(),this.tasksSrv.userTasks(this.userData.userId).subscribe(s=>{this.spinner.hide(),this.dataSource=s.tasks},s=>{this.spinner.hide(),this.dataSource=[]})}taskDetails(s){console.log(s),this.router.navigate([`tasks/task/${s._id}`])}complete(s){this.spinner.show(),this.tasksSrv.completeTask({id:s._id}).subscribe(n=>{this.spinner.hide(),this.getAllTasks(),this.toast.success("Task completed Successfully"),console.log(n)})}moveToInProgress(s){this.spinner.show(),this.tasksSrv.moveToInProgress({id:s._id}).subscribe(o=>{this.spinner.hide(),this.toast.success(o.massage),console.log(o),this.getAllTasks()},o=>{this.spinner.hide(),this.toast.error(o.massage)})}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(b.uw),t.Y36(T),t.Y36(d.qu),t.Y36(f.t2),t.Y36(_._W),t.Y36(l.F0),t.Y36(v))};static#s=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-tasks-list"]],decls:4,vars:2,consts:[[1,"mt-4"],[1,"row"],["class","col-md-4",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-md-4"],[1,"card","mt-3"],[1,"card-body","text-center"],[1,"card-title",3,"ngClass"],[1,"card-title","badge-danger","text-white","text-center"],[1,"card-subtitle","mb-2","text-muted"],[1,"card-text"],["mat-raised-button","",1,"card-link",2,"cursor","pointer",3,"click"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,Z,15,9,"div",2),t.YNc(3,A,2,0,"h2",3),t.qZA()()),2&o&&(t.xp6(2),t.Q6J("ngForOf",n.dataSource),t.xp6(1),t.Q6J("ngIf",0===n.dataSource.length))},dependencies:[p.zs,p.lW,r.mk,r.sg,r.O5],styles:["button[_ngcontent-%COMP%]{color:#fc7f7f;margin:0 15px}button.addTask[_ngcontent-%COMP%]{background-color:#ca085a;color:#fff;padding:2px 23px;font-size:20px}[_nghost-%COMP%]     table thead{background-color:#26f3d1!important}[_nghost-%COMP%]     table thead .mat-header-cell{color:#fff}.w-20[_ngcontent-%COMP%]{width:20%!important}h2[_ngcontent-%COMP%]{color:#26f3d1}"]})}return e})()},{path:"tasks/task/:id",component:(()=>{class e{constructor(s,o,n,a,u,m){this.tasks=s,this.router=o,this.route=n,this.spinner=a,this.toast=u,this.tokenSrv=m,this.taskId=""}ngOnInit(){this.taskId=this.route.snapshot.paramMap.get("id"),this.tokenSrv.getToken()&&this.taskId||this.router.navigate(["/auth/login"]),this.getTaskDetails()}getTaskDetails(){this.tasks.taskDetails(this.taskId).subscribe(s=>{this.taskDetails=s.tasks})}completeTask(s){this.tasks.completeTask({id:s}).subscribe(o=>{console.log(o)})}moveToInProgress(s){this.spinner.show(),this.tasks.moveToInProgress({id:s._id}).subscribe(o=>{this.spinner.hide(),this.toast.success(o.massage),console.log(o),this.router.navigate(["../"])},o=>{this.spinner.hide(),this.toast.error(o.massage)})}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(T),t.Y36(l.F0),t.Y36(l.gz),t.Y36(f.t2),t.Y36(_._W),t.Y36(v))};static#s=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-tasks-details"]],decls:13,vars:6,consts:[[1,"container"],[1,"d-flex","justify-content-between","align-items-baseline","my-3"],[1,"card-title"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],[1,"card-title","bg-danger","p-2","text-white"],[1,"card-subtitle","mb-2","text-muted"],[1,"card-text"],["mat-raised-button","","color","warn",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3),t.qZA(),t.YNc(4,M,2,0,"button",3),t.YNc(5,P,2,0,"button",3),t.qZA(),t.TgZ(6,"h3",4),t._uU(7),t.qZA(),t.TgZ(8,"p",5),t._uU(9),t.qZA(),t._UZ(10,"hr"),t.TgZ(11,"p",6),t._uU(12),t.qZA()()),2&o&&(t.xp6(3),t.hij("Title: ",n.taskDetails.title,""),t.xp6(1),t.Q6J("ngIf","Done"!==n.taskDetails.status),t.xp6(1),t.Q6J("ngIf","In-Progress"===n.taskDetails.status),t.xp6(2),t.hij("Status: ",n.taskDetails.status,""),t.xp6(2),t.hij("Deadline: ",n.taskDetails.deadline,""),t.xp6(3),t.hij("Description: ",n.taskDetails.description,""))},dependencies:[p.lW,r.O5],styles:[".imageBox[_ngcontent-%COMP%], .imageBox[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:250px}"]})}return e})()}];let w=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#s=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({imports:[r.ez,l.Bz.forChild(Y),l.Bz]})}return e})();var y=i(6949);let O=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#s=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({imports:[y.q,d.u5,d.UX,k.JF,r.ez,w]})}return e})()}}]);